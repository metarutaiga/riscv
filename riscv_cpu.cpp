//==============================================================================
// The RISC-V Instruction Set Manual
// Volume I: Unprivileged ISA
// Document Version 20191213
// December 13, 2019
//==============================================================================

#include "riscv_cpu.h"

//------------------------------------------------------------------------------
riscv_cpu::riscv_cpu()
{
    format = 0;
    for (int i = 0; i < 32; ++i)
    {
        x[i] = 0;
    }
    pc = 0;
    stack = new uintptr_t[8192];
    x[2] = (uintptr_t)&stack[8188];
}
//------------------------------------------------------------------------------
riscv_cpu::~riscv_cpu()
{
    delete[] stack;
}
//------------------------------------------------------------------------------
void riscv_cpu::execute(const void* code)
{
    pc = (uintptr_t)code;
    for (;;)
    {
        format = *(int*)pc;
        pc += 4;



        if (pc == 0)
            break;
    }
}
//------------------------------------------------------------------------------
